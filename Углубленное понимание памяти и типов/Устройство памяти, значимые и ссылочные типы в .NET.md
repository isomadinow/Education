### Резюме и мини-документация: Устройство памяти, значимые и ссылочные типы в .NET

---

#### **Что мы изучили сегодня:**

1. **Память в .NET:**
   - **Стек** (Stack): хранит локальные переменные и параметры методов, управляется по принципу LIFO.
   - **Куча** (Heap): используется для объектов, созданных с помощью `new`, управляется сборщиком мусора (GC).
   - **Сборщик мусора (Garbage Collector):** освобождает память от объектов, которые больше не используются.

2. **Значимые и ссылочные типы:**
   - **Значимые типы (`struct`)**:
     - Хранятся в стеке (если не являются частью объекта в куче).
     - При копировании создается новый независимый объект.
   - **Ссылочные типы (`class`)**:
     - Хранятся в куче, ссылка на объект — в стеке.
     - При копировании копируется ссылка, но объект остается тем же.

3. **Строки (`string`):**
   - Неизменяемы (immutable), любые изменения создают новый объект.
   - Оптимизируются через **пул строк (intern pool)** для экономии памяти.

4. **Значимые типы внутри ссылочных:**
   - Если значимый тип (`struct`) находится внутри ссылочного (`class`), он становится частью объекта в куче. Изменения в значимом типе отражаются через все ссылки на объект.

5. **Упаковка и распаковка (Boxing/Unboxing):**
   - Упаковка (boxing): процесс копирования значимого типа в ссылочный (`object`).
   - Распаковка (unboxing): обратный процесс извлечения значимого типа из ссылочного.
   - Операции упаковки и распаковки требуют затрат на выделение памяти и проверку типов.

---

#### **Примеры кода:**

1. **Поведение значимых и ссылочных типов:**
   ```csharp
   struct TypeCar { public string Name; }
   class Car { public string Model { get; set; } }

   TypeCar typeCar1 = new TypeCar { Name = "Electric" };
   TypeCar typeCar2 = typeCar1;
   typeCar2.Name = "Diesel";
   // typeCar1.Name остается "Electric".

   Car car1 = new Car { Model = "Camry" };
   Car car2 = car1;
   car2.Model = "Toyota";
   // car1.Model изменится на "Toyota".
   ```

2. **Особенности строк:**
   ```csharp
   string str1 = "Hello";
   string str2 = str1;
   str2 = "World";
   // str1 останется "Hello", так как строки неизменяемы.
   ```

3. **Упаковка и распаковка:**
   ```csharp
   int value = 42;
   object boxedValue = value; // Упаковка
   int unboxedValue = (int)boxedValue; // Распаковка
   ```

---

#### **Почему это важно:**
- Понимание памяти помогает писать эффективный код и избегать ошибок.
- Знание разницы между значимыми и ссылочными типами важно для проектирования.
- Упаковка и распаковка могут быть узкими местами для производительности.

убиться в тему, дай знать! 🚀